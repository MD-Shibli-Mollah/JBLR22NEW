*******Develop By: Robiul (JBL)********
*****Date: 31 JAN 2017 *************** 
!PROGRAM ATM.REISSUE.MASK
    SUBROUTINE  ATM.REISSUE.MASK
    $INSERT GLOBUS.BP I_COMMON
    $INSERT GLOBUS.BP I_EQUATE
    $INSERT GLOBUS.BP I_F.ACCOUNT
    $INSERT BP I_F.ATM.CARD.MGT
    $INSERT GLOBUS.BP I_ENQUIRY.COMMON


    FN.ATM="F.EB.ATM.CARD.MGT"
    F.ATM=""
    Y.REC.ID=O.DATA
    CALL OPF(FN.ATM,F.ATM)

    CALL F.READ(FN.ATM,Y.REC.ID,R.ATM.REC,F.ATM,Y.ERR)
    Y.CARD.NODB=R.ATM.REC<EB.ATM19.CARD.NO>
    Y.MASK=R.ATM.REC<EB.ATM19.CARD.MASK>
    Y.CARD.NAME=R.ATM.REC<EB.ATM19.ACCT.NO>
    CALL ATM.MS.MASK(Y.MASK,"DEP",Y.RESULT.DATA,Y.CARD.NAME)
    Y.CARD.NO=LEFT(Y.CARD.NODB,6):Y.RESULT.DATA:RIGHT(Y.CARD.NODB,4)
    O.DATA=Y.CARD.NO
    RETURN
